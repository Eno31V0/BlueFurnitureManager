const BOND_CAP = { 1: 10, 2: 10, 3: 20, 4: 30, 5: 100 };
const getBondCap = (star) => BOND_CAP[star] || 20;

// ========== 生徒マスタ (253名 - EX: 愛用品Wiki準拠) ==========
const INIT_STUDENTS = [
  {id:"s000",name:"アカネ（バニーガール）",star:3,hasEx:false},{id:"s001",name:"アカリ（正月）",star:3,hasEx:false},{id:"s002",name:"アコ",star:3,hasEx:false},{id:"s003",name:"アコ（ドレス）",star:3,hasEx:false},{id:"s004",name:"アズサ",star:3,hasEx:false},{id:"s005",name:"アズサ（水着）",star:3,hasEx:false},{id:"s006",name:"アスナ（バニーガール）",star:3,hasEx:true},{id:"s007",name:"アスナ（制服）",star:3,hasEx:false},{id:"s008",name:"アツコ",star:3,hasEx:false},{id:"s009",name:"アリス",star:3,hasEx:true},{id:"s010",name:"アリス（メイド）",star:3,hasEx:true},{id:"s011",name:"アリス（臨戦）",star:3,hasEx:false},{id:"s012",name:"アル",star:3,hasEx:true},{id:"s013",name:"アル（正月）",star:3,hasEx:false},{id:"s014",name:"アル（ドレス）",star:3,hasEx:false},{id:"s015",name:"イオリ",star:3,hasEx:false},{id:"s016",name:"イオリ（水着）",star:3,hasEx:true},{id:"s017",name:"イズナ",star:3,hasEx:false},{id:"s018",name:"イズナ（水着）",star:3,hasEx:false},{id:"s019",name:"イズミ",star:3,hasEx:true},{id:"s020",name:"イズミ（正月）",star:3,hasEx:false},{id:"s021",name:"イチカ",star:3,hasEx:false},{id:"s022",name:"イロハ",star:3,hasEx:false},{id:"s023",name:"ウイ",star:3,hasEx:false},{id:"s024",name:"ウイ（水着）",star:3,hasEx:false},{id:"s025",name:"ウタハ（応援団）",star:3,hasEx:false},{id:"s026",name:"ウミカ",star:3,hasEx:true},{id:"s027",name:"エイミ",star:3,hasEx:true},{id:"s028",name:"エイミ（水着）",star:3,hasEx:false},{id:"s029",name:"エイミ（臨戦）",star:3,hasEx:false},{id:"s030",name:"エリ",star:3,hasEx:false},{id:"s031",name:"カエデ",star:3,hasEx:true},{id:"s032",name:"カズサ",star:3,hasEx:false},{id:"s033",name:"カズサ（バンド）",star:3,hasEx:false},{id:"s034",name:"カスミ",star:3,hasEx:false},{id:"s035",name:"カノエ",star:3,hasEx:false},{id:"s036",name:"カホ",star:3,hasEx:true},{id:"s037",name:"カヨコ（正月）",star:3,hasEx:false},{id:"s038",name:"カヨコ（ドレス）",star:3,hasEx:false},{id:"s039",name:"カリン",star:3,hasEx:false},{id:"s040",name:"カリン（バニーガール）",star:3,hasEx:false},{id:"s041",name:"カンナ",star:3,hasEx:false},{id:"s042",name:"カンナ（水着）",star:3,hasEx:false},{id:"s043",name:"キキョウ",star:3,hasEx:false},{id:"s044",name:"キキョウ（水着）",star:3,hasEx:false},{id:"s045",name:"キサキ",star:3,hasEx:false},{id:"s046",name:"キララ",star:3,hasEx:false},{id:"s047",name:"ケイ",star:3,hasEx:false},{id:"s048",name:"ココナ",star:3,hasEx:false},{id:"s049",name:"コタマ（キャンプ）",star:3,hasEx:false},{id:"s050",name:"コトリ（応援団）",star:3,hasEx:false},{id:"s051",name:"コハル",star:3,hasEx:false},{id:"s052",name:"コユキ",star:3,hasEx:true},{id:"s053",name:"サオリ",star:3,hasEx:true},{id:"s054",name:"サオリ（水着）",star:3,hasEx:false},{id:"s055",name:"サオリ（ドレス）",star:3,hasEx:false},{id:"s056",name:"サキ",star:3,hasEx:true},{id:"s057",name:"サキ（水着）",star:3,hasEx:false},{id:"s058",name:"サクラコ",star:3,hasEx:false},{id:"s059",name:"サクラコ（アイドル）",star:3,hasEx:false},{id:"s060",name:"サツキ",star:3,hasEx:false},{id:"s061",name:"サヤ",star:3,hasEx:false},{id:"s062",name:"サヤ（私服）",star:3,hasEx:true},{id:"s063",name:"シグレ",star:3,hasEx:false},{id:"s064",name:"シグレ（温泉）",star:3,hasEx:false},{id:"s065",name:"ジュリ（アルバイト）",star:3,hasEx:false},{id:"s066",name:"シュン",star:3,hasEx:false},{id:"s067",name:"シュン（幼女）",star:3,hasEx:true},{id:"s068",name:"シロコ",star:3,hasEx:true},{id:"s069",name:"シロコ（ライディング）",star:3,hasEx:false},{id:"s070",name:"シロコ（水着）",star:3,hasEx:false},{id:"s071",name:"シロコ＊テラー",star:3,hasEx:false},{id:"s072",name:"スズミ（マジカル）",star:3,hasEx:false},{id:"s073",name:"スバル",star:3,hasEx:false},{id:"s074",name:"スミレ",star:3,hasEx:true},{id:"s075",name:"スミレ（アルバイト）",star:3,hasEx:false},{id:"s076",name:"セイア",star:3,hasEx:false},{id:"s077",name:"セイア（水着）",star:3,hasEx:false},{id:"s078",name:"セナ",star:3,hasEx:false},{id:"s079",name:"セナ（私服）",star:3,hasEx:false},{id:"s080",name:"セリカ（正月）",star:3,hasEx:false},{id:"s081",name:"セリカ（水着）",star:3,hasEx:false},{id:"s082",name:"セリナ（クリスマス）",star:3,hasEx:false},{id:"s083",name:"タカネ",star:3,hasEx:false},{id:"s084",name:"チアキ",star:3,hasEx:false},{id:"s085",name:"チェリノ",star:3,hasEx:false},{id:"s086",name:"チェリノ（温泉）",star:3,hasEx:true},{id:"s087",name:"チセ（水着）",star:3,hasEx:true},{id:"s088",name:"チナツ（温泉）",star:3,hasEx:false},{id:"s089",name:"チヒロ",star:3,hasEx:false},{id:"s090",name:"ツクヨ",star:3,hasEx:false},{id:"s091",name:"ツクヨ（ドレス）",star:3,hasEx:false},{id:"s092",name:"ツバキ（ガイド）",star:3,hasEx:false},{id:"s093",name:"ツルギ",star:3,hasEx:true},{id:"s094",name:"トキ",star:3,hasEx:true},{id:"s095",name:"トキ（バニーガール）",star:3,hasEx:false},{id:"s096",name:"トモエ（チーパオ）",star:3,hasEx:false},{id:"s097",name:"ナギサ",star:3,hasEx:false},{id:"s098",name:"ナギサ（水着）",star:3,hasEx:false},{id:"s099",name:"ナグサ",star:3,hasEx:false},{id:"s100",name:"ナツ",star:3,hasEx:false},{id:"s101",name:"ナツ（バンド）",star:3,hasEx:false},{id:"s102",name:"ニヤ",star:3,hasEx:false},{id:"s103",name:"ネル",star:3,hasEx:true},{id:"s104",name:"ネル（バニーガール）",star:3,hasEx:false},{id:"s105",name:"ネル（制服）",star:3,hasEx:false},{id:"s106",name:"ノア",star:3,hasEx:false},{id:"s107",name:"ノア（パジャマ）",star:3,hasEx:false},{id:"s108",name:"ノゾミ",star:3,hasEx:false},{id:"s109",name:"ノドカ（温泉）",star:3,hasEx:false},{id:"s110",name:"ノノミ（水着）",star:3,hasEx:false},{id:"s111",name:"ハスミ（水着）",star:3,hasEx:false},{id:"s112",name:"ハナエ（クリスマス）",star:3,hasEx:true},{id:"s113",name:"ハナコ（水着）",star:3,hasEx:false},{id:"s114",name:"ハルカ（正月）",star:3,hasEx:false},{id:"s115",name:"ハルナ",star:3,hasEx:false},{id:"s116",name:"ハルナ（正月）",star:3,hasEx:false},{id:"s117",name:"ハルナ（体操服）",star:3,hasEx:true},{id:"s118",name:"ハレ（キャンプ）",star:3,hasEx:false},{id:"s119",name:"ヒカリ",star:3,hasEx:false},{id:"s120",name:"ヒナ",star:3,hasEx:true},{id:"s121",name:"ヒナ（水着）",star:3,hasEx:true},{id:"s122",name:"ヒナ（ドレス）",star:3,hasEx:false},{id:"s123",name:"ヒナタ",star:3,hasEx:true},{id:"s124",name:"ヒナタ（水着）",star:3,hasEx:false},{id:"s125",name:"ヒビキ",star:3,hasEx:true},{id:"s126",name:"ヒフミ",star:3,hasEx:false},{id:"s127",name:"ヒフミ（水着）",star:3,hasEx:true},{id:"s128",name:"ヒマリ",star:3,hasEx:false},{id:"s129",name:"ヒマリ（臨戦）",star:3,hasEx:false},{id:"s130",name:"ヒヨリ",star:3,hasEx:false},{id:"s131",name:"ヒヨリ（水着）",star:3,hasEx:false},{id:"s132",name:"フィーナ（ガイド）",star:3,hasEx:false},{id:"s133",name:"フウカ（正月）",star:3,hasEx:false},{id:"s134",name:"フブキ（水着）",star:3,hasEx:false},{id:"s135",name:"フユ",star:3,hasEx:false},{id:"s136",name:"ホシノ",star:3,hasEx:true},{id:"s137",name:"ホシノ（水着）",star:3,hasEx:false},{id:"s138",name:"ホシノ（臨戦）",star:3,hasEx:false},{id:"s140",name:"マキ",star:3,hasEx:false},{id:"s141",name:"マキ（キャンプ）",star:3,hasEx:false},{id:"s142",name:"マコト",star:3,hasEx:false},{id:"s143",name:"マシロ",star:3,hasEx:true},{id:"s144",name:"マシロ（水着）",star:3,hasEx:false},{id:"s145",name:"マリー（体操服）",star:3,hasEx:false},{id:"s146",name:"マリー（アイドル）",star:3,hasEx:false},{id:"s147",name:"マリナ",star:3,hasEx:false},{id:"s148",name:"マリナ（チーパオ）",star:3,hasEx:false},{id:"s149",name:"ミカ",star:3,hasEx:false},{id:"s150",name:"ミカ（水着）",star:3,hasEx:false},{id:"s151",name:"ミサキ",star:3,hasEx:true},{id:"s152",name:"ミサキ（水着）",star:3,hasEx:false},{id:"s153",name:"ミチル（ドレス）",star:3,hasEx:false},{id:"s154",name:"ミドリ",star:3,hasEx:true},{id:"s155",name:"ミドリ（メイド）",star:3,hasEx:false},{id:"s156",name:"ミナ",star:3,hasEx:false},{id:"s157",name:"ミネ",star:3,hasEx:false},{id:"s158",name:"ミノリ",star:3,hasEx:false},{id:"s159",name:"ミモリ",star:3,hasEx:true},{id:"s160",name:"ミモリ（水着）",star:3,hasEx:false},{id:"s161",name:"ミヤコ",star:3,hasEx:true},{id:"s162",name:"ミヤコ（水着）",star:3,hasEx:false},{id:"s163",name:"ミユ",star:3,hasEx:true},{id:"s164",name:"ミヨ",star:3,hasEx:false},{id:"s165",name:"ムツキ（正月）",star:3,hasEx:false},{id:"s166",name:"メグ",star:3,hasEx:false},{id:"s167",name:"メル",star:3,hasEx:false},{id:"s168",name:"モエ",star:3,hasEx:false},{id:"s169",name:"モエ（水着）",star:3,hasEx:false},{id:"s170",name:"モモイ（メイド）",star:3,hasEx:false},{id:"s171",name:"ヤクモ",star:3,hasEx:false},{id:"s172",name:"ユウカ（体操服）",star:3,hasEx:false},{id:"s173",name:"ユウカ（パジャマ）",star:3,hasEx:false},{id:"s174",name:"ユカリ",star:3,hasEx:false},{id:"s175",name:"ユカリ（水着）",star:3,hasEx:false},{id:"s176",name:"ユズ",star:3,hasEx:true},{id:"s177",name:"ユズ（臨戦）",star:3,hasEx:false},{id:"s178",name:"ヨシミ（バンド）",star:3,hasEx:false},{id:"s179",name:"リオ",star:3,hasEx:false},{id:"s180",name:"リオ（臨戦）",star:3,hasEx:false},{id:"s181",name:"リツ",star:3,hasEx:false},{id:"s182",name:"ルミ",star:3,hasEx:false},{id:"s183",name:"レイ",star:3,hasEx:false},{id:"s184",name:"レイサ",star:3,hasEx:false},{id:"s185",name:"レイサ（マジカル）",star:3,hasEx:false},{id:"s186",name:"レイジョ",star:3,hasEx:false},{id:"s187",name:"レンゲ",star:3,hasEx:true},{id:"s188",name:"ワカモ",star:3,hasEx:true},{id:"s189",name:"ワカモ（水着）",star:3,hasEx:true},{id:"s190",name:"御坂美琴",star:3,hasEx:false},{id:"s191",name:"初音ミク",star:3,hasEx:false},{id:"s192",name:"食蜂操祈",star:3,hasEx:false},
  {id:"s193",name:"アイリ",star:2,hasEx:false},{id:"s194",name:"アカネ",star:2,hasEx:false},{id:"s195",name:"アカリ",star:2,hasEx:false},{id:"s196",name:"アヤネ",star:2,hasEx:false},{id:"s197",name:"ウタハ",star:2,hasEx:true},{id:"s198",name:"カヨコ",star:2,hasEx:false},{id:"s199",name:"キリノ",star:2,hasEx:false},{id:"s200",name:"シズコ",star:2,hasEx:true},{id:"s201",name:"ジュンコ",star:2,hasEx:true},{id:"s202",name:"セリカ",star:2,hasEx:true},{id:"s203",name:"チセ",star:2,hasEx:true},{id:"s204",name:"ツバキ",star:2,hasEx:false},{id:"s205",name:"ノノミ",star:2,hasEx:true},{id:"s206",name:"ハスミ",star:2,hasEx:true},{id:"s207",name:"ハナエ",star:2,hasEx:false},{id:"s208",name:"ハナコ",star:2,hasEx:true},{id:"s209",name:"ハレ",star:2,hasEx:true},{id:"s210",name:"フウカ",star:2,hasEx:false},{id:"s211",name:"マリー",star:2,hasEx:true},{id:"s212",name:"ムツキ",star:2,hasEx:false},{id:"s213",name:"モミジ",star:2,hasEx:true},{id:"s214",name:"モモイ",star:2,hasEx:true},{id:"s215",name:"ユウカ",star:2,hasEx:true},{id:"s216",name:"レンゲ（水着）",star:2,hasEx:false},
  {id:"s217",name:"アイリ（バンド）",star:1,hasEx:false},{id:"s218",name:"アオバ",star:1,hasEx:false},{id:"s219",name:"アスナ",star:1,hasEx:false},{id:"s220",name:"アツコ（水着）",star:1,hasEx:false},{id:"s221",name:"アヤネ（水着）",star:1,hasEx:false},{id:"s222",name:"イズミ（水着）",star:1,hasEx:true},{id:"s223",name:"イチカ（水着）",star:1,hasEx:false},{id:"s224",name:"イブキ",star:1,hasEx:false},{id:"s225",name:"カリン（制服）",star:1,hasEx:false},{id:"s226",name:"キリノ（水着）",star:1,hasEx:false},{id:"s227",name:"コタマ",star:1,hasEx:false},{id:"s228",name:"コトリ",star:1,hasEx:true},{id:"s229",name:"コハル（水着）",star:1,hasEx:false},{id:"s230",name:"シズコ（水着）",star:1,hasEx:false},{id:"s231",name:"シミコ",star:1,hasEx:false},{id:"s232",name:"ジュリ",star:1,hasEx:false},{id:"s233",name:"ジュンコ（正月）",star:1,hasEx:false},{id:"s234",name:"スズミ",star:1,hasEx:true},{id:"s235",name:"セリナ",star:1,hasEx:false},{id:"s236",name:"チナツ",star:1,hasEx:true},{id:"s237",name:"ツルギ（水着）",star:1,hasEx:false},{id:"s238",name:"トキ（臨戦）",star:1,hasEx:false},{id:"s239",name:"トモエ",star:1,hasEx:false},{id:"s240",name:"ノドカ",star:1,hasEx:false},{id:"s241",name:"ハスミ（体操服）",star:1,hasEx:false},{id:"s242",name:"ハルカ",star:1,hasEx:false},{id:"s243",name:"ヒビキ（応援団）",star:1,hasEx:false},{id:"s244",name:"フィーナ",star:1,hasEx:false},{id:"s245",name:"フブキ",star:1,hasEx:false},{id:"s246",name:"ミチル",star:1,hasEx:true},{id:"s247",name:"ミネ（アイドル）",star:1,hasEx:false},{id:"s248",name:"ミユ（水着）",star:1,hasEx:false},{id:"s249",name:"ユズ（メイド）",star:1,hasEx:false},{id:"s250",name:"ヨシミ",star:1,hasEx:true},{id:"s251",name:"ラブ",star:1,hasEx:false},{id:"s252",name:"佐天涙子",star:1,hasEx:false},
];

// ========== 家具マスタ (188個) + シリーズ ==========
const SERIES_MAP={"2人用ミレニアムデスク":"ミレニアムタワーラウンジ","DJライブステージ":"DJパーティー会場","おせち料理のテーブル":"お正月","お正月のこたつ":"お正月","お正月の座布団":"お正月","お正月の提灯":"お正月","お正月の衣桁":"お正月","しゅっしゅっぽっぽ！ミニ列車セット":"ハイランダー列車","アビドス教室のカーディガンが置かれた机":"アビドス教室","アビドス教室のクジラ人形が置かれた机":"アビドス教室","アビドス教室のメガネが置かれた机":"アビドス教室","アビドス教室のリボンと手袋が置かれた机":"アビドス教室","アビドス教室の自転車":"アビドス教室","アビドス教室の覆面が置かれた机":"アビドス教室","エアホッケーゲーム機":"ゼリーズゲーセン","カラフルな大型プール":"サマーリゾート","カラフルな自販機":"ゼリーズゲーセン","カラーのシングルチェア":"モモフレンズのカフェ","カラーのマルチテレビ":"ゼリーズゲーセン","カラーの二段植木鉢":"モモフレンズのカフェ","カラーの長椅子":"モモフレンズのカフェ","ガラスの窓":"モモフレンズのカフェ","クラシックソファテーブルセット":"ゲヘナパーティー","グランドピアノ":"ゲヘナパーティー","ゲーム機用のウッドモニター":"ゲーム開発部","ゲーム開発部のソファー":"ゲーム開発部","サンシャイン・フラワープール":"サンシャインリゾート","サンシャイン・フラワー噴水":"サンシャインリゾート","スチール製の雑誌スタンド":"伝統的な温泉郷","ゼリーズのクレーンゲーム":"ゼリーズゲーセン","チル&クールアイスクリーム冷蔵庫":"ビーチサイド","デパートのデザイナーソファ":"デパート","ハイランダー自動改札機":"ハイランダー列車","ハロウィーンのパンプキンデザートテーブル":"ハロウィーンカフェ","ハロウィーンのパンプキンバーカウンター":"ハロウィーンカフェ","バイオレットパーティーテーブルセット":"ゲヘナパーティー","バレンタインのクッキーソファー":"バレンタイン","バレンタインのシングルチェア":"バレンタイン","バレンタインのティーテーブル":"バレンタイン","バレンタインの収納セット":"バレンタイン","ビーチサイドのふわふわ浮き輪":"ビーチサイド","ビーチサイドのクーリング扇風機":"ビーチサイド","ビーチサンベッドとミニテーブル":"DJパーティー会場","マッサージチェア":"伝統的な温泉郷","ミリタリーチェア・イエロー":"ミリタリーアウトドア","ミリタリーチェア・グリーン":"ミリタリーアウトドア","ミリタリーチェア・ピンク":"ミリタリーアウトドア","ミリタリーチェア・ブルー":"ミリタリーアウトドア","ミレニアムタワーラウンジのエスカレーター":"ミレニアムタワーラウンジ","モンステラの白い植木鉢":"サマーリゾート","レトロな三段積みアンプ":"サマーリゾート","レモンパラソルホワイトテーブル":"ビーチサイド","レースゲーム機":"ゼリーズゲーセン","保温庫":"伝統的な温泉郷","原木のテラステーブル":"ビーチサイド","原木の収納ケース":"ノーマル家具","原木の大型テーブル":"ノーマル家具","夏のパラソルセット":"サマーリゾート","大運動会のパン食い競走用スタンド":"大運動会","大運動会のマット・スカイブルー":"大運動会","大運動会のマット・ブルー":"大運動会","大運動会の休憩テント":"大運動会","大運動会の器具保管箱":"大運動会","大運動会の審判席":"大運動会","大運動会の応援スタンド":"大運動会","天蓋付きリゾートソファ":"サマーリゾート","折りたたみ式リゾートテーブル":"サマーリゾート","抹茶セット付きの座卓":"伝統的な温泉郷","書初め用のテーブル":"お正月","檜の浴槽":"伝統的な温泉郷","波模様の座椅子":"伝統的な温泉郷","浮き輪付きの小型プール":"サマーリゾート","海へのお出かけセット":"サマーリゾート","温泉カピバラのガチャガチャ":"伝統的な温泉郷","灯油ストーブと切り餅":"お正月","爽やかなフルーツバー":"ビーチサイド","甘くて涼しいかき氷バー":"ビーチサイド","白いコーヒーテーブル":"モモフレンズのカフェ","白いシンプルソファー":"ゼリーズゲーセン","百花繚乱専用ガンスタンド":"百鬼夜行","自動出入口パターン1":"輸送船","格闘ゲーム機":"ゼリーズゲーセン"};

const INIT_FURNITURE = [
  {id:"f000",name:"2人用ミレニアムデスク",type:"テーブル",cat:"furniture",targets:["s007","s225"]},{id:"f001",name:"DJライブステージ",type:"家電",cat:"decoration",targets:["s054"]},{id:"f002",name:"おせち料理のテーブル",type:"テーブル",cat:"furniture",targets:["s233","s116"]},{id:"f003",name:"お年玉用テーブル",type:"テーブル",cat:"furniture",targets:["s080"]},{id:"f004",name:"お月見テーブル",type:"テーブル",cat:"furniture",targets:["s020"]},{id:"f005",name:"お正月のお飾り台",type:"小物",cat:"furniture",targets:["s165"]},{id:"f006",name:"お正月のこたつ",type:"テーブル",cat:"furniture",targets:["s080"]},{id:"f007",name:"お正月の座布団",type:"椅子",cat:"furniture",targets:["s037"]},{id:"f008",name:"お正月の提灯",type:"小物",cat:"furniture",targets:["s246"]},{id:"f009",name:"お正月の衣桁",type:"小物",cat:"furniture",targets:["s133"]},{id:"f010",name:"お祭りお面陳列台",type:"小物",cat:"furniture",targets:["s026"]},{id:"f011",name:"しゅっしゅっぽっぽ！ミニ列車セット",type:"小物",cat:"furniture",targets:["s108","s119"]},{id:"f012",name:"どこでもばしゃばしゃプール",type:"小物",cat:"furniture",targets:["s044"]},{id:"f013",name:"アイスクリームテーブル",type:"テーブル",cat:"furniture",targets:["s229","s113"]},{id:"f014",name:"アイスプール",type:"小物",cat:"furniture",targets:["s028"]},{id:"f015",name:"アウトドアコーヒーテーブル",type:"テーブル",cat:"furniture",targets:["s118"]},{id:"f016",name:"アウトドアパーテーション",type:"小物",cat:"furniture",targets:["s049"]},{id:"f017",name:"アシストプルアップマシン",type:"小物",cat:"furniture",targets:["s075"]},{id:"f018",name:"アビドス教室のカーディガンが置かれた机",type:"テーブル",cat:"furniture",targets:["s205"]},{id:"f019",name:"アビドス教室のクジラ人形が置かれた机",type:"テーブル",cat:"furniture",targets:["s136"]},{id:"f020",name:"アビドス教室のメガネが置かれた机",type:"テーブル",cat:"furniture",targets:["s196"]},{id:"f021",name:"アビドス教室のリボンと手袋が置かれた机",type:"テーブル",cat:"furniture",targets:["s202"]},{id:"f022",name:"アビドス教室の自転車",type:"小物",cat:"furniture",targets:["s069"]},{id:"f023",name:"アビドス教室の覆面が置かれた机",type:"テーブル",cat:"furniture",targets:["s068"]},{id:"f024",name:"アビドス自転車整備スタンド",type:"小物",cat:"furniture",targets:["s071"]},{id:"f025",name:"アンティークな収納付きウッドデスク",type:"テーブル",cat:"furniture",targets:["s023"]},{id:"f026",name:"イブキのお勉強セット",type:"テーブル",cat:"furniture",targets:["s224"]},{id:"f027",name:"エアホッケーゲーム機",type:"家電",cat:"decoration",targets:["s154","s214"]},{id:"f028",name:"エキスパート向け移動標的",type:"小物",cat:"furniture",targets:["s139"]},{id:"f029",name:"カウンターチェア・ゴールドブラック",type:"椅子",cat:"furniture",targets:["s000"]},{id:"f030",name:"カウンターチェア・ゴールドレッドワイン",type:"椅子",cat:"furniture",targets:["s104"]},{id:"f031",name:"カウンターチェア・シルバーネオンブルー",type:"椅子",cat:"furniture",targets:["s006"]},{id:"f032",name:"カウンターチェア・ダークバイオレット",type:"椅子",cat:"furniture",targets:["s040"]},{id:"f033",name:"カウンターチェア・ディープブルー",type:"椅子",cat:"furniture",targets:["s095"]},{id:"f034",name:"カフェ用ベッド",type:"ベッド",cat:"furniture",targets:["s155","s170"]},{id:"f035",name:"カラフルな大型プール",type:"小物",cat:"furniture",targets:["s237"]},{id:"f036",name:"カラフルな自販機",type:"家電",cat:"decoration",targets:["s128"]},{id:"f037",name:"カラーのシングルチェア",type:"椅子",cat:"furniture",targets:["s002"]},{id:"f038",name:"カラーのマルチテレビ",type:"家電",cat:"decoration",targets:["s089"]},{id:"f039",name:"カラーの二段植木鉢",type:"小物",cat:"furniture",targets:["s211"]},{id:"f040",name:"カラーの長椅子",type:"椅子",cat:"furniture",targets:["s245"]},{id:"f041",name:"ガラスの窓",type:"壁の装飾",cat:"decoration",targets:["s053","s151"]},{id:"f042",name:"クラシックソファテーブルセット",type:"椅子",cat:"furniture",targets:["s003","s122"]},{id:"f043",name:"クラシックパターンスーツケース",type:"小物",cat:"furniture",targets:["s024"]},{id:"f044",name:"グランドピアノ",type:"小物",cat:"furniture",targets:["s122"]},{id:"f045",name:"ゲーム機用のウッドモニター",type:"家電",cat:"decoration",targets:["s154","s214"]},{id:"f046",name:"ゲーム開発部のスペース",type:"小物",cat:"furniture",targets:["s238","s180"]},{id:"f047",name:"ゲーム開発部のソファー",type:"椅子",cat:"furniture",targets:["s009"]},{id:"f048",name:"ゲーム開発部のロッカー",type:"クローゼット",cat:"furniture",targets:["s176"]},{id:"f049",name:"サンシャインレモンツリー",type:"小物",cat:"furniture",targets:["s113"]},{id:"f050",name:"サンシャイン・フラワープール",type:"小物",cat:"furniture",targets:["s175"]},{id:"f051",name:"サンシャイン・フラワー噴水",type:"小物",cat:"furniture",targets:["s220"]},{id:"f052",name:"シャワーブース",type:"クローゼット",cat:"furniture",targets:["s162"]},{id:"f053",name:"ジャイアントプールフロート",type:"小物",cat:"furniture",targets:["s134"]},{id:"f054",name:"ジュークボックス",type:"小物",cat:"furniture",targets:["s073"]},{id:"f055",name:"スイカ割りセット",type:"小物",cat:"furniture",targets:["s223","s111"]},{id:"f056",name:"スイングチェア",type:"椅子",cat:"furniture",targets:["s098"]},{id:"f057",name:"スキューバダイビングギア保管ラック",type:"小物",cat:"furniture",targets:["s057"]},{id:"f058",name:"スチール製の雑誌スタンド",type:"小物",cat:"furniture",targets:["s022"]},{id:"f059",name:"セイアのオープンカー",type:"小物",cat:"furniture",targets:["s077"]},{id:"f060",name:"セルフィーブース",type:"小物",cat:"furniture",targets:["s046"]},{id:"f061",name:"ゼリーズのクレーンゲーム",type:"家電",cat:"decoration",targets:["s052"]},{id:"f062",name:"タイプライターデスク",type:"テーブル",cat:"furniture",targets:["s164"]},{id:"f063",name:"タロットテーブル",type:"テーブル",cat:"furniture",targets:["s252"]},{id:"f064",name:"ダメにするソファ・白",type:"椅子",cat:"furniture",targets:["s107"]},{id:"f065",name:"ダメにするソファ・青",type:"椅子",cat:"furniture",targets:["s173"]},{id:"f066",name:"チル&クールアイスクリーム冷蔵庫",type:"家電",cat:"decoration",targets:["s018"]},{id:"f067",name:"ティーパーティーテーブル",type:"テーブル",cat:"furniture",targets:["s076","s097","s149"]},{id:"f068",name:"テレビデオ",type:"家電",cat:"decoration",targets:["s132"]},{id:"f069",name:"ディープブルーベース",type:"小物",cat:"furniture",targets:["s033"]},{id:"f070",name:"デパートのデザイナーソファ",type:"椅子",cat:"furniture",targets:["s092"]},{id:"f071",name:"ハイランダー自動改札機",type:"小物",cat:"furniture",targets:["s218"]},{id:"f072",name:"ハロウィーンのパンプキンデザートテーブル",type:"テーブル",cat:"furniture",targets:["s201"]},{id:"f073",name:"ハロウィーンのパンプキンバーカウンター",type:"テーブル",cat:"furniture",targets:["s193"]},{id:"f074",name:"バイオレットパーティーテーブルセット",type:"テーブル",cat:"furniture",targets:["s038"]},{id:"f075",name:"バタバタカジキの展示台",type:"小物",cat:"furniture",targets:["s070"]},{id:"f076",name:"バレンタインのクッキーソファー",type:"椅子",cat:"furniture",targets:["s188"]},{id:"f077",name:"バレンタインのシングルチェア",type:"椅子",cat:"furniture",targets:["s147"]},{id:"f078",name:"バレンタインのティーテーブル",type:"テーブル",cat:"furniture",targets:["s100"]},{id:"f079",name:"バレンタインの収納セット",type:"クローゼット",cat:"furniture",targets:["s032"]},{id:"f080",name:"バーベキューグリル",type:"小物",cat:"furniture",targets:["s081"]},{id:"f081",name:"パンケーキ・ティーテーブル",type:"テーブル",cat:"furniture",targets:["s065"]},{id:"f082",name:"ビーチのブランコ",type:"小物",cat:"furniture",targets:["s150"]},{id:"f083",name:"ビーチサイドのふわふわ浮き輪",type:"小物",cat:"furniture",targets:["s137"]},{id:"f084",name:"ビーチサイドのクーリング扇風機",type:"小物",cat:"furniture",targets:["s087"]},{id:"f085",name:"ビーチサンベッドとミニテーブル",type:"椅子",cat:"furniture",targets:["s152"]},{id:"f086",name:"ビーチフェスティバル用椅子",type:"椅子",cat:"furniture",targets:["s131"]},{id:"f087",name:"ピンク色のエレクトリックギター",type:"小物",cat:"furniture",targets:["s178"]},{id:"f088",name:"フリーボックス",type:"テーブル",cat:"furniture",targets:["s072","s185"]},{id:"f089",name:"フレッシュショップテーブル",type:"テーブル",cat:"furniture",targets:["s192"]},{id:"f090",name:"ヘルメット掃除キット",type:"小物",cat:"furniture",targets:["s251"]},{id:"f091",name:"ベーシック・エレクトリックキーボード",type:"小物",cat:"furniture",targets:["s217"]},{id:"f092",name:"マッサージチェア",type:"家電",cat:"decoration",targets:["s088"]},{id:"f093",name:"ミニキッチン",type:"小物",cat:"furniture",targets:["s129"]},{id:"f094",name:"ミニスツールとサンベッド",type:"ベッド",cat:"furniture",targets:["s124"]},{id:"f095",name:"ミリタリーキャンプボードの設置物",type:"小物",cat:"furniture",targets:["s141"]},{id:"f096",name:"ミリタリーチェア・イエロー",type:"椅子",cat:"furniture",targets:["s056"]},{id:"f097",name:"ミリタリーチェア・グリーン",type:"椅子",cat:"furniture",targets:["s163"]},{id:"f098",name:"ミリタリーチェア・ピンク",type:"椅子",cat:"furniture",targets:["s161"]},{id:"f099",name:"ミリタリーチェア・ブルー",type:"椅子",cat:"furniture",targets:["s168"]},{id:"f100",name:"ミレニアムタワーラウンジのエスカレーター",type:"壁の装飾",cat:"decoration",targets:["s105"]},{id:"f101",name:"ミレニアム製ピッチングマシン",type:"小物",cat:"furniture",targets:["s183"]},{id:"f102",name:"メッシュハンモック",type:"ベッド",cat:"furniture",targets:["s169"]},{id:"f103",name:"メンテナンスステーション",type:"小物",cat:"furniture",targets:["s011"]},{id:"f104",name:"モモフレンズのグッズ台",type:"小物",cat:"furniture",targets:["s190"]},{id:"f105",name:"モンステラの白い植木鉢",type:"小物",cat:"furniture",targets:["s090"]},{id:"f106",name:"ライフセーバー用椅子",type:"小物",cat:"furniture",targets:["s226"]},{id:"f107",name:"ライブステージ",type:"家電",cat:"decoration",targets:["s059","s146","s247"]},{id:"f108",name:"ラグジュアリービーチベッド",type:"ベッド",cat:"furniture",targets:["s150"]},{id:"f109",name:"ラーメンテーブル",type:"テーブル",cat:"furniture",targets:["s153"]},{id:"f110",name:"リズムの導き手",type:"小物",cat:"furniture",targets:["s101"]},{id:"f111",name:"リラックスチェア",type:"椅子",cat:"furniture",targets:["s043"]},{id:"f112",name:"レトロな三段積みアンプ",type:"家電",cat:"decoration",targets:["s189"]},{id:"f113",name:"レモンパラソルホワイトテーブル",type:"テーブル",cat:"furniture",targets:["s160"]},{id:"f114",name:"レースゲーム機",type:"家電",cat:"decoration",targets:["s094","s103"]},{id:"f115",name:"ロイヤルダイヤチェア",type:"椅子",cat:"furniture",targets:["s008"]},{id:"f116",name:"万能テーブル",type:"テーブル",cat:"furniture",targets:["s029"]},{id:"f117",name:"万魔殿のデスク",type:"テーブル",cat:"furniture",targets:["s060"]},{id:"f118",name:"万魔殿の掲示板",type:"小物",cat:"furniture",targets:["s084"]},{id:"f119",name:"中華風の椅子",type:"椅子",cat:"furniture",targets:["s156"]},{id:"f120",name:"中華風ホットショーケース",type:"クローゼット",cat:"furniture",targets:["s182"]},{id:"f121",name:"休憩用のベンチテーブル",type:"テーブル",cat:"furniture",targets:["s117"]},{id:"f122",name:"伝統的な格子の掃き出し窓",type:"壁の装飾",cat:"decoration",targets:["s017"]},{id:"f123",name:"保温庫",type:"家電",cat:"decoration",targets:["s086"]},{id:"f124",name:"原初のアバンギャルド",type:"小物",cat:"furniture",targets:["s179"]},{id:"f125",name:"原木のテラステーブル",type:"テーブル",cat:"furniture",targets:["s034","s184"]},{id:"f126",name:"原木の収納ケース",type:"クローゼット",cat:"furniture",targets:["s130"]},{id:"f127",name:"原木の大型テーブル",type:"テーブル",cat:"furniture",targets:["s078"]},{id:"f128",name:"原稿用の机",type:"テーブル",cat:"furniture",targets:["s167"]},{id:"f129",name:"取調室のテーブル",type:"テーブル",cat:"furniture",targets:["s041"]},{id:"f130",name:"古風な調理台",type:"家電",cat:"decoration",targets:["s187"]},{id:"f131",name:"図書館のクラシックな椅子",type:"椅子",cat:"furniture",targets:["s213"]},{id:"f132",name:"夏のパラソルセット",type:"テーブル",cat:"furniture",targets:["s144"]},{id:"f133",name:"夏色の水鉄砲スタンド",type:"クローゼット",cat:"furniture",targets:["s216"]},{id:"f134",name:"大聖堂の長椅子",type:"椅子",cat:"furniture",targets:["s058","s123","s211"]},{id:"f135",name:"大運動会のパン食い競走用スタンド",type:"小物",cat:"furniture",targets:["s241"]},{id:"f136",name:"大運動会のマット・スカイブルー",type:"小物",cat:"furniture",targets:["s172"]},{id:"f137",name:"大運動会のマット・ブルー",type:"小物",cat:"furniture",targets:["s050"]},{id:"f138",name:"大運動会の休憩テント",type:"椅子",cat:"furniture",targets:["s145"]},{id:"f139",name:"大運動会の器具保管箱",type:"小物",cat:"furniture",targets:["s106"]},{id:"f140",name:"大運動会の審判席",type:"椅子",cat:"furniture",targets:["s021"]},{id:"f141",name:"大運動会の応援スタンド",type:"小物",cat:"furniture",targets:["s025","s243"]},{id:"f142",name:"天蓋付きリゾートソファ",type:"椅子",cat:"furniture",targets:["s005"]},{id:"f143",name:"威厳の役員用デスク",type:"テーブル",cat:"furniture",targets:["s142"]},{id:"f144",name:"彫刻の作業台",type:"小物",cat:"furniture",targets:["s181"]},{id:"f145",name:"怪しげな大釜",type:"小物",cat:"furniture",targets:["s035"]},{id:"f146",name:"折りたたみ式リゾートテーブル",type:"テーブル",cat:"furniture",targets:["s110"]},{id:"f147",name:"折り紙テーブル",type:"テーブル",cat:"furniture",targets:["s174"]},{id:"f148",name:"抹茶セット付きの座卓",type:"テーブル",cat:"furniture",targets:["s109"]},{id:"f149",name:"救急箱ホワイトテーブル",type:"テーブル",cat:"furniture",targets:["s079"]},{id:"f150",name:"新鮮！魚箱",type:"小物",cat:"furniture",targets:["s248"]},{id:"f151",name:"暖かなクリスマス暖炉",type:"小物",cat:"furniture",targets:["s112"]},{id:"f152",name:"書初め用のテーブル",type:"テーブル",cat:"furniture",targets:["s013"]},{id:"f153",name:"最高級役員用デスク",type:"テーブル",cat:"furniture",targets:["s014","s038"]},{id:"f154",name:"木人椿",type:"小物",cat:"furniture",targets:["s148","s186"]},{id:"f155",name:"木工作業台",type:"テーブル",cat:"furniture",targets:["s158"]},{id:"f156",name:"格闘ゲーム機",type:"家電",cat:"decoration",targets:["s009","s103"]},{id:"f157",name:"植物棚",type:"クローゼット",cat:"furniture",targets:["s242","s114"]},{id:"f158",name:"檜の浴槽",type:"小物",cat:"furniture",targets:["s064","s166"]},{id:"f159",name:"水色のシングルソファ",type:"椅子",cat:"furniture",targets:["s010"]},{id:"f160",name:"水難救命ボックス",type:"小物",cat:"furniture",targets:["s042"]},{id:"f161",name:"波模様の座椅子",type:"椅子",cat:"furniture",targets:["s239"]},{id:"f162",name:"浮き輪付きの小型プール",type:"小物",cat:"furniture",targets:["s121"]},{id:"f163",name:"海へのお出かけセット",type:"小物",cat:"furniture",targets:["s221"]},{id:"f164",name:"温泉カピバラのガチャガチャ",type:"家電",cat:"decoration",targets:["s031"]},{id:"f165",name:"演説用の机",type:"テーブル",cat:"furniture",targets:["s096"]},{id:"f166",name:"灯油ストーブと切り餅",type:"家電",cat:"decoration",targets:["s244"]},{id:"f167",name:"爽やかなフルーツバー",type:"テーブル",cat:"furniture",targets:["s063"]},{id:"f168",name:"玄龍門の玉座",type:"椅子",cat:"furniture",targets:["s045"]},{id:"f169",name:"甘くて涼しいかき氷バー",type:"クローゼット",cat:"furniture",targets:["s230"]},{id:"f170",name:"白いコーヒーテーブル",type:"テーブル",cat:"furniture",targets:["s048"]},{id:"f171",name:"白いシンプルソファー",type:"椅子",cat:"furniture",targets:["s123"]},{id:"f172",name:"百夜堂の出張屋台",type:"小物",cat:"furniture",targets:["s200"]},{id:"f173",name:"百花繚乱専用ガンスタンド",type:"クローゼット",cat:"furniture",targets:["s099"]},{id:"f174",name:"百鬼夜行グッズの飾り棚",type:"クローゼット",cat:"furniture",targets:["s036"]},{id:"f175",name:"簡易更衣室",type:"小物",cat:"furniture",targets:["s091"]},{id:"f176",name:"自動出入口パターン1",type:"壁の装飾",cat:"decoration",targets:["s177"]},{id:"f177",name:"臼と杵",type:"小物",cat:"furniture",targets:["s001"]},{id:"f178",name:"芸術家の初作品",type:"小物",cat:"furniture",targets:["s135"]},{id:"f179",name:"豪奢な装飾のティーテーブル",type:"テーブル",cat:"furniture",targets:["s157"]},{id:"f180",name:"豪華な姿見",type:"小物",cat:"furniture",targets:["s055"]},{id:"f181",name:"販売用の机",type:"テーブル",cat:"furniture",targets:["s083","s171"]},{id:"f182",name:"軽快な譜面台",type:"小物",cat:"furniture",targets:["s082"]},{id:"f183",name:"輸送船の窓",type:"壁の装飾",cat:"decoration",targets:["s011"]},{id:"f184",name:"過ぎ去りし思い出",type:"小物",cat:"furniture",targets:["s047"]},{id:"f185",name:"鉄製引き戸ロッカー",type:"クローゼット",cat:"furniture",targets:["s249"]},{id:"f186",name:"陰陽部室の座卓",type:"テーブル",cat:"furniture",targets:["s102"]},{id:"f187",name:"魔法の絨毯＆サーキュレーター",type:"小物",cat:"furniture",targets:["s030"]},
];

const getSeries = (name) => SERIES_MAP[name] || "";
const SERIES_ORDER=["その他","ノーマル家具","モモフレンズのカフェ","ゼリーズゲーセン","バレンタイン","サマーリゾート","ハロウィーンカフェ","伝統的な温泉郷","お正月","ミリタリーアウトドア","ビーチサイド","大運動会","アビドス教室","ゲーム開発部","サンシャインリゾート","デパート","ゲヘナパーティー","トリニティ教室","DJパーティー会場","百鬼夜行","ミレニアムタワーラウンジ","ハイランダー列車","ティーパーティー","ワイルドハントキャンパス","輸送船"];
const seriesIdx = (name) => { const s=getSeries(name)||"その他"; const i=SERIES_ORDER.indexOf(s); return i>=0?i:0; };
const FURN_TYPES = ["テーブル","クローゼット","椅子","ベッド","小物","家電","壁の装飾"];
const STUDENT_MAP = Object.fromEntries(INIT_STUDENTS.map(s => [s.id, s]));
const FURN_MAP = Object.fromEntries(INIT_FURNITURE.map(f => [f.id, f]));
